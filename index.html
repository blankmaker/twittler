<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="underscore.js"></script>
    <link type="text/css" rel="stylesheet" href="dn_twittler.css"/>
  </head>
  <body>
    <h1>Twittler!</h1>
    <button id="refreshButton">See more tweets</button>
    <!-- 
    1) show X more tweets in button
    2) Use jQuery to collapse all tweets that weren't loaded in that round
    3) Create button to show all those hidden tweets
    4) Create new page to show new tweets
    5) Format time
    -->
    <div id="tweetFeed">
    </div>
    <script>
      $(document).ready(function(){
       var tweetArray = streams.home;
       var masterArray = [];

    

       var displayTweetsOnLoad = function() { 
        var $tweetSet = $("<div class='tweetSet'></div>"); //this could be refactored
        $tweetSet.prependTo($("#tweetFeed"));

        _.each(tweetArray, function(tweet) {
        var $tweetContainer = $("<div class='tweetContainer'></div>");
        $tweetContainer.append("<p class='user'>" +tweet.user+ "</p>");
        $tweetContainer.append("<p class='message'>" +tweet.message+ "</p>");
        $tweetContainer.append("<p class='time'>" +tweet.created_at+ "</p>");
        $tweetContainer.appendTo($tweetSet);
        masterArray.push(tweet);

        });
        tweetArray.splice(0,tweetArray.length);        
        //this has to be added to a "processed array" so that we can collect all of the user tweets in one place. Also, is this the correct use of Splice, particularly the negative number? 
        
      };
      displayTweetsOnLoad();

 
    

      $("button").on("click", function() {
        var $tweetSet = $("<div class='tweetSet'></div>"); //this could be refactored
        $tweetSet.prependTo($("#tweetFeed"));

        _.each(tweetArray, function(tweet, index) {
        var $tweetContainer = $("<div class='tweetContainer'></div>");
        $tweetContainer.append("<p class='user'>" +tweet.user+ "</p>");
        $tweetContainer.append("<p class='message'>" +tweet.message+ "</p>");
        $tweetContainer.append("<p class='time'>" +tweet.created_at+ "</p>");
        $tweetContainer.prependTo($tweetSet);
        masterArray.push(tweet);
        });
        tweetArray.splice(0,tweetArray.length);  

      })

      });

    </script>
  </body>
</html>


